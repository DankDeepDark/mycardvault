(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{11:function(e,t,a){},18:function(e,t,a){e.exports=a.p+"static/media/logo.56acff60.png"},21:function(e,t,a){e.exports=a(35)},27:function(e,t,a){},28:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(17),c=a.n(r),m=(a(27),a(5)),o=(a(28),a(3));var s=e=>{let{children:t}=e;return localStorage.getItem("token")?t:l.a.createElement(o.a,{to:"/login"})},u=(a(11),a(18)),i=a.n(u),E=a(36);const h=E.a.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"application/json"}});h.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer "+t),e});var d=h;var g=()=>{const e=Object(o.q)(),t=!!localStorage.getItem("token"),[a,r]=Object(n.useState)("");Object(n.useEffect)(()=>{d.get("/auth/me").then(e=>r(e.data.username)).catch(console.error)},[]);return l.a.createElement("div",null,l.a.createElement("header",{className:"app-header"},l.a.createElement("div",{className:"header-logo"},l.a.createElement("h2",null,"Qu\u1ea3n l\xfd Th\u1ebb")),l.a.createElement("div",{className:"header-user"},t?l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,"Ch\xe0o, ",l.a.createElement("strong",null,a)),l.a.createElement(m.b,{to:"/profile"},l.a.createElement("button",null,"T\xe0i kho\u1ea3n")),l.a.createElement("button",{onClick:()=>{localStorage.removeItem("token"),e("/login")}},"\u0110\u0103ng xu\u1ea5t")):l.a.createElement(l.a.Fragment,null,l.a.createElement(m.b,{to:"/login"},l.a.createElement("button",null,"\u0110\u0103ng nh\u1eadp")),l.a.createElement(m.b,{to:"/register"},l.a.createElement("button",null,"\u0110\u0103ng k\xfd"))))),l.a.createElement("div",{className:"home-container"},l.a.createElement("div",{className:"menu-links"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(m.b,{to:"/scan"},"Qu\xe9t m\xe3 QR")),l.a.createElement("li",null,l.a.createElement(m.b,{to:"/cards"},"Danh s\xe1ch Th\u1ebb")),l.a.createElement("li",null,l.a.createElement(m.b,{to:"/add-card"},"Th\xeam Th\u1ebb M\u1edbi")))),l.a.createElement("div",{className:"home-main"},l.a.createElement("img",{src:i.a,alt:"Logo",className:"home-image"}),l.a.createElement("p",null,"Ch\u1ecdn ch\u1ee9c n\u0103ng t\u1eeb menu b\xean tr\xe1i \u0111\u1ec3 b\u1eaft \u0111\u1ea7u."))))},p=a(10);var v=()=>{const[e,t]=Object(n.useState)(""),[a,r]=Object(n.useState)(null);return Object(n.useEffect)(()=>{navigator.mediaDevices.getUserMedia({video:!0}).then(()=>r(!0)).catch(()=>r(!1))},[]),null===a?l.a.createElement("div",null,"\u0110ang ki\u1ec3m tra quy\u1ec1n camera..."):!1===a?l.a.createElement("div",null,"Kh\xf4ng c\xf3 quy\u1ec1n truy c\u1eadp camera."):l.a.createElement("div",{className:"container"},l.a.createElement("h2",null,"Qu\xe9t M\xe3 QR"),l.a.createElement("div",{className:"qr-scanner"},l.a.createElement(p.a,{delay:300,onError:e=>console.error(e),onResult:e=>{return e&&((a=e.getText())&&t(a));var a}})),e&&l.a.createElement("p",null,"K\u1ebft qu\u1ea3: ",e))};var b=()=>{const[e,t]=Object(n.useState)({username:"",password:""}),a=Object(o.q)(),r=a=>t({...e,[a.target.name]:a.target.value});return l.a.createElement("div",{className:"auth-container"},l.a.createElement("div",{className:"auth-header"},l.a.createElement("h2",null,"\u0110\u0103ng nh\u1eadp")),l.a.createElement("form",{className:"auth-form",onSubmit:async t=>{t.preventDefault();try{const t=await E.a.post("http://localhost:5000/api/auth/login",e);localStorage.setItem("token",t.data.token),a("/")}catch(r){var n,l;alert((null===(n=r.response)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.message)||"L\u1ed7i server")}}},l.a.createElement("input",{name:"username",placeholder:"T\xean ng\u01b0\u1eddi d\xf9ng",value:e.username,onChange:r,required:!0}),l.a.createElement("input",{name:"password",type:"password",placeholder:"M\u1eadt kh\u1ea9u",value:e.password,onChange:r,required:!0}),l.a.createElement("button",{type:"submit"},"\u0110\u0103ng nh\u1eadp")),l.a.createElement("div",{className:"auth-footer"},"Ch\u01b0a c\xf3 t\xe0i kho\u1ea3n? ",l.a.createElement(m.b,{to:"/register"},"\u0110\u0103ng k\xfd ngay!")))};var f=()=>{const[e,t]=Object(n.useState)({username:"",email:"",password:""}),a=Object(o.q)(),r=a=>t({...e,[a.target.name]:a.target.value});return l.a.createElement("div",{className:"auth-container"},l.a.createElement("div",{className:"auth-header"},l.a.createElement("h2",null,"\u0110\u0103ng k\xfd")),l.a.createElement("form",{className:"auth-form",onSubmit:async t=>{t.preventDefault();try{const t=await fetch("http://localhost:5000/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();if(!t.ok)throw new Error(n.message||"L\u1ed7i \u0111\u0103ng k\xfd");alert("\u0110\u0103ng k\xfd th\xe0nh c\xf4ng!"),a("/login")}catch(n){alert(n.message||"L\u1ed7i server")}}},l.a.createElement("input",{name:"username",placeholder:"T\xean ng\u01b0\u1eddi d\xf9ng",value:e.username,onChange:r,required:!0}),l.a.createElement("input",{name:"email",type:"email",placeholder:"Email",value:e.email,onChange:r,required:!0}),l.a.createElement("input",{name:"password",type:"password",placeholder:"M\u1eadt kh\u1ea9u",value:e.password,onChange:r,required:!0}),l.a.createElement("button",{type:"submit"},"\u0110\u0103ng k\xfd")),l.a.createElement("div",{className:"auth-footer"},"\u0110\xe3 c\xf3 t\xe0i kho\u1ea3n? ",l.a.createElement(m.b,{to:"/login"},"\u0110\u0103ng nh\u1eadp ngay!")))};var S=()=>{const[e,t]=Object(n.useState)([]),a=Object(o.q)();Object(n.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("cards")||"[]");t(e)},[]);return l.a.createElement("div",{className:"container"},l.a.createElement("h2",null,"Danh s\xe1ch Th\u1ebb Visa/Master"),l.a.createElement("button",{onClick:()=>a("/add-card")},"Th\xeam Th\u1ebb M\u1edbi"),0===e.length?l.a.createElement("p",null,"Ch\u01b0a c\xf3 th\u1ebb n\xe0o. H\xe3y th\xeam th\u1ebb!"):l.a.createElement("ul",null,e.map(n=>l.a.createElement("li",{key:n.id,className:"card-item"},l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("strong",null,n.holder)),l.a.createElement("p",null,n.number," | H\u1ea1n: ",n.expiry)),l.a.createElement("div",null,l.a.createElement("button",{onClick:()=>a("/transact/"+n.id)},"Giao D\u1ecbch"),l.a.createElement("button",{onClick:()=>(a=>{const n=e.filter(e=>e.id!==a);localStorage.setItem("cards",JSON.stringify(n)),t(n)})(n.id)},"X\xf3a"))))))},N=a(19);var O=()=>{const[e,t]=Object(n.useState)(""),[a,r]=Object(n.useState)(""),[c,m]=Object(n.useState)(""),s=Object(o.q)();return l.a.createElement("div",{className:"container"},l.a.createElement("h2",null,"Th\xeam Th\u1ebb Visa/Master"),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"S\u1ed1 Th\u1ebb"),l.a.createElement("input",{value:e,onChange:e=>t(e.target.value),placeholder:"1234 5678 9012 3456"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"T\xean Ch\u1ee7 Th\u1ebb"),l.a.createElement("input",{value:a,onChange:e=>r(e.target.value),placeholder:"Nguyen Van A"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"H\u1ea1n S\u1eed D\u1ee5ng"),l.a.createElement("input",{type:"month",value:c,onChange:e=>m(e.target.value)})),l.a.createElement("button",{onClick:()=>{const t={id:Object(N.v4)(),number:e,holder:a,expiry:c},n=JSON.parse(localStorage.getItem("cards")||"[]");n.push(t),localStorage.setItem("cards",JSON.stringify(n)),s("/cards")}},"L\u01b0u Th\u1ebb"))};var y=()=>{const{id:e}=Object(o.s)(),[t,a]=Object(n.useState)(null),[r,c]=Object(n.useState)(""),m=Object(o.q)();Object(n.useEffect)(()=>{const t=JSON.parse(localStorage.getItem("cards")||"[]").find(t=>t.id===e);if(!t)return m("/cards");a(t)},[e,m]);return l.a.createElement("div",{className:"container"},l.a.createElement("h2",null,"Giao D\u1ecbch Th\u1ebb"),t&&l.a.createElement("div",{className:"card-info"},l.a.createElement("p",null,l.a.createElement("strong",null,t.holder)),l.a.createElement("p",null,t.number," | H\u1ea1n: ",t.expiry)),l.a.createElement("div",{className:"qr-scanner"},l.a.createElement(p.a,{delay:300,onError:e=>console.error(e),onResult:(e,t)=>{return e&&((a=e.getText())&&c(a));var a}})),r&&l.a.createElement("p",null,"K\u1ebft qu\u1ea3 truy\u1ec1n t\u1edbi POS: ",r))};var k=()=>{const[e,t]=Object(n.useState)({});return Object(n.useEffect)(()=>{d.get("/auth/me").then(e=>t(e.data)).catch(console.error)},[]),l.a.createElement("div",{className:"container"},l.a.createElement("h2",null,"Th\xf4ng Tin T\xe0i Kho\u1ea3n"),l.a.createElement("p",null,l.a.createElement("strong",null,"Username:")," ",e.username),l.a.createElement("p",null,l.a.createElement("strong",null,"Email:")," ",e.email))};var j=function(){return l.a.createElement(m.a,null,l.a.createElement(o.d,null,l.a.createElement(o.b,{path:"/login",element:l.a.createElement(b,null)}),l.a.createElement(o.b,{path:"/register",element:l.a.createElement(f,null)}),l.a.createElement(o.b,{path:"/",element:l.a.createElement(s,null,l.a.createElement(g,null))}),l.a.createElement(o.b,{path:"/scan",element:l.a.createElement(s,null,l.a.createElement(v,null))}),l.a.createElement(o.b,{path:"/cards",element:l.a.createElement(s,null,l.a.createElement(S,null))}),l.a.createElement(o.b,{path:"/add-card",element:l.a.createElement(s,null,l.a.createElement(O,null))}),l.a.createElement(o.b,{path:"/transact/:id",element:l.a.createElement(s,null,l.a.createElement(y,null))}),l.a.createElement(o.b,{path:"/profile",element:l.a.createElement(s,null,l.a.createElement(k,null))})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.createRoot(document.getElementById("root")).render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(m.a,null,l.a.createElement(j,null)))),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})}},[[21,1,2]]]);
//# sourceMappingURL=main.7c8f4558.chunk.js.map